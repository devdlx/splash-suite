{"version":3,"sources":["splash-firebase.es6"],"names":[],"mappings":"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","file":"splash-firebase.js","sourcesContent":["(function() {\n    'use strict';\n\n\n    let MyBehavior = {};\n    let app = null;\n    let init = null;\n    let user = null;\n\n    class dlxFirebase {\n\n        // Define behaviors with a getter.\n        get behaviors() {\n            return [MyBehavior];\n        }\n\n        // Element setup goes in beforeRegister instead of createdCallback.\n        beforeRegister() {\n            this.is = 'splash-firebase';\n\n            // Define the properties object in beforeRegister.\n            this.properties = {\n                data: {\n                    type: Object,\n                    notify: true,\n                    // computed: '_computePath(app, path)'\n                },\n\n                path: {\n                    type: String,\n                    notify: true,\n                },\n\n                items: {\n                    type: Array,\n                    notify: true,\n                },\n\n                query: {\n                    type: String,\n                    notify: true,\n                },\n                idPath: {\n                    type: Object,\n                    value: ''\n                },\n\n                app: {\n                    type: Object,\n                    notify: true,\n                },\n\n                name: {\n                    type: String,\n                    value: ''\n                },\n                apiKey: {\n                    value: '',\n                    type: String,\n                    //value: 'AIzaSyAMDWKG7qyQ9msJaaKb7vmvK-rNu3X_7-Q'\n                },\n\n                authDomain: {\n                    value: '',\n                    type: String,\n                    //value: 'project-604055857022237684.firebaseapp.com'\n                },\n\n                databaseUrl: {\n                    value: '',\n                    type: String,\n                    //value: 'https://project-604055857022237684.firebaseio.com'\n                },\n\n\n                storageBucket: {\n                    value: '',\n                    type: String,\n                    //value: 'project-604055857022237684.appspot.com'\n                },\n\n\n\n                user: {\n                    type: Object,\n                    notify: true,\n                    value: true\n                },\n                signedIn: {\n                    type: Boolean,\n                    notify: true,\n                    value: false,\n                    computed: '_computeSignedIn(app, user)'\n                },\n            };\n\n            this.listeners = {};\n\n            this.observers = [\n                '_computeApp(name, apiKey, authDomain, databaseUrl)',\n                '_computePath(app, path)',\n                '_computeQuery(app, query, idPath)',\n                '_computeUserState(app)'\n            ];\n        }\n\n        // #_computeApp\n        _computeApp(name, apiKey, authDomain, databaseUrl) {\n\n            if (!name && !apiKey && !authDomain && !databaseUrl) {\n                return;\n            }\n\n            // console.log(name, apiKey, authDomain, databaseUrl);\n            // if (!window.firebase) {\n            //     this.loadFB(name, apiKey, authDomain, databaseUrl);\n            //     return;\n            // }\n\n\n            if (apiKey && authDomain && databaseUrl) {\n                init = {\n                    apiKey: apiKey,\n                    authDomain: authDomain,\n                    databaseURL: databaseUrl\n                };\n                if (name) {\n                    init.name = name;\n                }\n                // app = firebase.initializeApp(init, name || null);\n                app = firebase.initializeApp(init);\n                this.set('app', app);\n            } else {\n                return null;\n            }\n            //app = firebase.app(name);\n\n        }\n\n\n        save(path, item) {\n            // console.log(app, path);\n            return this.app.database().ref(path).push(item);\n        }\n\n\n        _computePath(app, path) {\n            // console.log(app, path);\n            app.database().ref(path).once('value').then((snap) => {\n                let item = snap.val();\n                let key = snap.key;\n                // console.log(item);\n                this.set('data', item);\n                // return item;\n            });\n        }\n\n        _computeQuery(app, query, idPath) {\n            // console.log(app, query, idPath);\n\n            this.set('items', []);\n\n            // app.database().ref(query).push({\n            //     \"title\": 'Savage Mode | 21 Savage & Metro Boomin',\n            //     \"image\": \"https://i1.sndcdn.com/artworks-000171601684-t2q183-large.jpg\",\n            //     \"link\": \"soundcloud/playlists/241605487\",\n            //     \"type\": \"soundcloud:playlist\",\n            //     \"description\": \"21 Savage & Metro Boomin's collaborative album, #SAVAGEMODE available on iTunes: smarturl.it/SavageModeiTunes\\n\\nhttp://21savage.com\\nhttp://twitter.com/21savage\\nhttp://instagram.com/21savage\\nhttp://facebook.com/21savage\\nhttp://youtube.com/c/21savage\",\n            //     \"data_items\": \"soundcloud:tracks\",\n            //     \"data_items_title\": \"title\",\n            //     \"data_items_link\": \"${soundcloud:tracks:publisher_metadata:urn}\",\n            //\n          \n            app.database().ref(query).on('child_added', function(snap) {\n                let item = snap.val();\n                let key = snap.key;\n                this.push('items', item);\n            }.bind(this));\n\n        }\n\n        _computeQueryIdPath(app, query, idPath) {\n            // console.log(app, query, idPath);\n\n            this.set('items', []);\n\n            // app.database().ref(query).push({\n            //     \"title\": 'Savage Mode | 21 Savage & Metro Boomin',\n            //     \"image\": \"https://i1.sndcdn.com/artworks-000171601684-t2q183-large.jpg\",\n            //     \"link\": \"soundcloud/playlists/241605487\",\n            //     \"type\": \"soundcloud:playlist\",\n            //     \"description\": \"21 Savage & Metro Boomin's collaborative album, #SAVAGEMODE available on iTunes: smarturl.it/SavageModeiTunes\\n\\nhttp://21savage.com\\nhttp://twitter.com/21savage\\nhttp://instagram.com/21savage\\nhttp://facebook.com/21savage\\nhttp://youtube.com/c/21savage\",\n            //     \"data_items\": \"soundcloud:tracks\",\n            //     \"data_items_title\": \"title\",\n            //     \"data_items_link\": \"${soundcloud:tracks:publisher_metadata:urn}\",\n            //\n            app.database().ref(query).once('value', function(snap) {\n                let item = snap.val();\n                let key = snap.key;\n\n            }).then((itemObject) => {\n                // console.log(itemObject.val());\n\n                let arr = [];\n                let value = itemObject.val();\n                for (var item in value) {\n                    if (value.hasOwnProperty(item)) {\n                        if (idPath.length) {\n                            app.database().ref(idPath + '/' + item).once('value')\n                                .then((deep) => {\n                                    let item = deep.val();\n                                    let key = deep.key;\n                                    this.push('items', item);\n                                    // arr.push(item);\n                                    // console.log(item);\n                                });\n                        } else {\n                            // console.log(value[item]);\n                            this.push('items', value[item]);\n                            // arr.push(item);\n                        }\n                    }\n                }\n                // this.set('items', arr);\n                // console.log(this.items);\n            });\n\n        }\n\n\n        attached() {\n            //console.log('attached');\n        }\n\n        // #ready\n        ready() {\n            // console.dir(app);\n            if (app) {\n                this.set('app', app);\n            }\n            if (app && user) {\n                this.set('user', user);\n            }\n        }\n\n        constructor() {\n            console.log('constructor');\n        }\n\n\n        // #detached\n        detached() {}\n\n        // #attributeChanged\n        attributeChanged() {}\n\n        loadFB(name, apiKey, authDomain, databaseUrl) {\n            let scripts = [\n                '../bower_components/firebase/firebase.js'\n            ];\n            for (var i = 0; i < scripts.length; i++) {\n                var _s = document.createElement('script');\n                _s.src = scripts[i];\n                _s.onload = (e) => {\n                    this._computeApp(name, apiKey, authDomain, databaseUrl);\n                };\n                document.body.appendChild(_s);\n            }\n        }\n\n\n        _computeUserState(app) {\n            app.auth().onAuthStateChanged((user) => {\n                // console.log(user.toJSON());\n                this._computeUser(user);\n            }, function(error) {\n                console.log(error);\n            });\n        }\n\n\n        _computeSignedIn(app, user) {\n            // console.log(app, user);\n            return app && user;\n        }\n\n        _computeUserFromStorage(app) {\n\n            var _user = localStorage.getItem(\"splash-firebase-user\");\n            console.log(_user);\n            if (_user) {\n                this._computeUser(_user);\n            }\n        }\n\n        _computeUser(user) {\n\n            if (user) {\n                // User is signed in.\n                // console.log(user);\n                var displayName = user.displayName || user.email;\n                var email = user.email;\n                var emailVerified = user.emailVerified;\n                var photoURL = user.photoURL; // || 'https://s3.amazonaws.com/sensortower-itunes/blog/0126-app-store-review-fraud.jpg';\n                var uid = user.uid;\n                var providerData = user.providerData;\n                user.getToken().then((accessToken) => {\n                    // console.log({\n                    //     displayName: displayName,\n                    //     email: email,\n                    //     emailVerified: emailVerified,\n                    //     photoURL: photoURL,\n                    //     uid: uid,\n                    //     accessToken: accessToken,\n                    //     providerData: providerData\n                    // });\n\n                    let _user = {\n                        displayName: displayName,\n                        email: email,\n                        emailVerified: emailVerified,\n                        photoURL: photoURL,\n                        uid: uid,\n                        accessToken: accessToken,\n                        providerData: providerData\n                    }\n                    this.set('user', _user || user);\n                    localStorage.setItem(\"splash-firebase-user\", _user || user);\n                });\n\n            } else {\n                this.set('user', null);\n                // User is signed out.\n                //console.log('Signed out');\n                //return null;\n            }\n\n        }\n\n        logout() {\n            return this.signOut();\n        }\n\n        signOut() {\n            return firebase.auth().signOut().then(() => {\n                // Sign-out successful.\n                this.set('user', null);\n                this.fire('toast', {\n                    message: 'Signed Out'\n                }, {\n                    bubbles: false\n                });\n            }, function(error) {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                console.log(errorCode, errorMessage);\n                this.fire('splash-firebase-auth-error', {\n                    errorCode: errorCode,\n                    errorMessage: errorMessage\n                }, {\n                    bubbles: false\n                });\n            });\n        }\n\n\n        signIn(email, password) {\n            return firebase.auth().signInWithEmailAndPassword(email, password)\n                .then((e) => {\n                    console.log(e);\n                    //user = e;\n                    this.set('user', user);\n                    this.fire('splash-firebase-auth-signedin', {\n                        user: user\n                    }, {\n                        bubbles: false\n                    });\n                })\n                .catch((error) => {\n                    var errorCode = error.code;\n                    var errorMessage = error.message;\n                    console.log(errorCode, errorMessage);\n                    this.fire('splash-firebase-auth-error', {\n                        errorCode: errorCode,\n                        errorMessage: errorMessage\n                    }, {\n                        bubbles: false\n                    });\n\n\n                });\n        }\n\n        createUser(email, password, password2) {\n\n            if (password !== password2) {\n                this.fire('splash-firebase-auth-error', {\n                    errorCode: 400,\n                    errorMessage: 'passwords do not match'\n                }, {\n                    bubbles: false\n                });\n                return;\n            }\n\n            return firebase.auth().createUserWithEmailAndPassword(email, password)\n                .then((e) => {\n                    console.log(e);\n                    this._computeUser(e);\n                })\n                .catch(function(error) {\n                    // Handle Errors here.\n                    var errorCode = error.code;\n                    var errorMessage = error.message;\n                    console.log(errorCode, errorMessage);\n                    this.fire('splash-firebase-auth-error', {\n                        errorCode: errorCode,\n                        errorMessage: errorMessage\n                    }, {\n                        bubbles: false\n                    });\n                });\n\n        }\n\n        auth(_provider) {\n            console.log(_provider);\n            if (_provider === 'google') {\n                var provider = new firebase.auth.GoogleAuthProvider();\n                provider.addScope('https://www.googleapis.com/auth/plus.login');\n                provider.addScope('https://www.googleapis.com/auth/youtube.upload');\n            }\n\n            if (_provider === 'facebook') {\n                var provider = new firebase.auth.FacebookAuthProvider();\n                provider.addScope('user_birthday');\n            }\n\n            if (_provider === 'twitter') {\n                var provider = new firebase.auth.TwitterAuthProvider();\n            }\n\n            app.auth().signInWithPopup(provider).then((result) => {\n                // var token = result.credential.accessToken;\n                // The signed-in user info.\n                this._computeUser(result.user);\n            }).catch(function(error) {\n                // Handle Errors here.\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                // The email of the user's account used.\n                var email = error.email;\n                // The firebase.auth.AuthCredential type that was used.\n                var credential = error.credential;\n                // ...\n                console.log(error);\n                this.fire('splash-firebase-auth-error', {\n                    errorCode: errorCode,\n                    errorMessage: errorMessage\n                }, {\n                    bubbles: false\n                });\n\n            });\n        }\n\n\n    }\n\n    // Register the element using Polymer's constructor.\n    Polymer(dlxFirebase);\n\n    // const load = window.chrome.loadTimes();\n    // let fp = (load.firstPaintTime - load.startLoadTime) * 1000;\n    // if (fp) {\n    //     // ga('send', 'timing', 'load', 'firstPaint', fp);\n    //     console.log('First Paint:', fp.toFixed(2), 'ms');\n    // }\n\n})();\n"]}